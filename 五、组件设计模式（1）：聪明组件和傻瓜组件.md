# äº”ã€ç»„ä»¶è®¾è®¡æ¨¡å¼ï¼ˆ1ï¼‰ï¼šèªæ˜ç»„ä»¶å’Œå‚»ç“œç»„ä»¶

### 1.èªæ˜ç»„ä»¶å’Œå‚»ç“œç»„ä»¶æœ¬è´¨ï¼š**å°±æ˜¯æŠŠä¸€ä¸ªåŠŸèƒ½åˆ†é…åˆ°ä¸¤ä¸ªç»„ä»¶ä¸­ï¼Œå½¢æˆçˆ¶å­å…³ç³»**

- å¤–å±‚çš„çˆ¶ç»„ä»¶è´Ÿè´£ç®¡ç†æ•°æ®çŠ¶æ€
- å†…å±‚çš„å­ç»„ä»¶åªè´Ÿè´£å±•ç¤º



### 2.åšäººè¦èµ°å¿ƒï¼Œç»„ä»¶è¦ä¸“ä¸€ğŸ¤–ï¼šè½¯ä»¶è®¾è®¡ä¸­çš„ä¸€ä¸ªåŸåˆ™--â€œè´£ä»»åˆ†ç¦»â€

ç®€å•è¯´å°±æ˜¯è®©ä¸€ä¸ªæ¨¡å—çš„è´£ä»»å°½é‡å°‘ï¼Œå¦‚æœå‘ç°ä¸€ä¸ªæ¨¡å—åŠŸèƒ½è¿‡å¤šï¼Œå°±åº”è¯¥æ‹†åˆ†ä¸ºå¤šä¸ªæ¨¡å—ï¼Œè®©ä¸€ä¸ªæ¨¡å—éƒ½ä¸“æ³¨äºä¸€ä¸ªåŠŸèƒ½ï¼Œè¿™æ ·æ›´åˆ©äºä»£ç çš„ç»´æŠ¤ã€‚

```javascript
UI = f(data)   //æ•°æ®é©±åŠ¨æ¸²æŸ“
```

- React æ¥åšç•Œé¢ï¼Œæ— å¤–ä¹å°±æ˜¯è·å¾—é©±åŠ¨ç•Œé¢çš„æ•°æ®ï¼Œç„¶ååˆ©ç”¨è¿™äº›æ•°æ®æ¥æ¸²æŸ“ç•Œé¢è¿™äº›å¯ä»¥æ”¾åˆ°ä¸€ä¸ªç•Œé¢ä¸­å»åš

- ä½†æ˜¯æœ€å¥½çš„åšæ³•æ˜¯æŠŠè·å–å’Œç®¡ç†æ•°æ®è¿™ä»¶äº‹å’Œç•Œé¢æ¸²æŸ“è¿™ä»¶äº‹åˆ†å¼€ï¼Œåšæ³•å°±æ˜¯ï¼š

  - æŠŠè·å–å’Œç®¡ç†æ•°æ®çš„é€»è¾‘æ”¾åœ¨çˆ¶ç»„ä»¶ï¼Œä¹Ÿå°±æ˜¯èªæ˜ç»„ä»¶

  - æŠŠæ¸²æŸ“ç•Œé¢çš„é€»è¾‘æ”¾åœ¨å­ç»„ä»¶ï¼Œä¹Ÿå°±æ˜¯å‚»ç“œç»„ä»¶

  - ä¸Šè¿°å¤„ç†çš„ä¼˜ç‚¹â˜„ï¸ï¼š

    - ğŸ­ çµæ´»åœ°ä¿®æ”¹æ•°æ®çŠ¶æ€ç®¡ç†æ–¹å¼ï¼Œæœ€åˆä½ å¯èƒ½ç”¨ Redux æ¥ç®¡ç†æ•°æ®ï¼Œç„¶åä½ æƒ³è¦ä¿®æ”¹ä¸ºç”¨ Mobxï¼Œå¦‚æœæŒ‰ç…§è¿™ç§æ¨¡å¼åˆ†å‰²ç»„ä»¶ï¼Œé‚£ä¹ˆï¼Œä½ éœ€è¦æ”¹çš„åªæœ‰èªæ˜ç»„ä»¶ï¼Œå‚»ç“œç»„ä»¶å¯ä»¥ä¿æŒåŸçŠ¶ã€‚

      

ä¸¾ä¸ªä¾‹å­ğŸŒ°ï¼š

```javascript
//å‚»ç“œç»„ä»¶ä»£ç ğŸš‚ SmileFace
import React from 'react';

import SmileFace from './yaoming_simile.png';

/*
const Joke = ({value}) => {
  return (
    <div>
      <img src={SmileFace} />
      {value || 'loading...' }
    </div>
  );
}
*/

class Joke extends React.PureComponent {      //æ³¨æ„è¿™ä¸ªåœ°æ–¹æ˜¯PureComponent
  render() {
    return (
      <div>
        <img src={SmileFace} alt="ming" />
        {this.props.value || 'loading...' }
      </div>
    );
  }
}

export default Joke;


//èªæ˜ç»„ä»¶ä»£ç ğŸšœ  RandomJoke
import React from 'react';

import Joke from './Joke';

export default class RandomJoke extends React.Component {
  state = {
    joke: 'loading...'
  }

  render() {
    return <Joke value={this.state.joke} />
  }

  componentDidMount() {
    fetch('https://icanhazdadjoke.com/',
      {headers: {'Accept': 'application/json'}}
    ).then(response => {
      return response.json();
    }).then(json => {
      console.log(json);
      this.setState({joke: json.joke});
    });
  }
}

```



### 3.PureComponents:

å½“ RandomJoke è¦æ¸²æŸ“ Joke æ—¶ï¼Œå³ä½¿ä¼ å…¥çš„ props æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼ŒJoke ä¹Ÿè¦èµ°ä¸€éå®Œæ•´çš„æ¸²æŸ“è¿‡ç¨‹ï¼Œè¿™å°±æ˜¾å¾—æµªè´¹äº†ã€‚ç”±æ­¤æ¥å¼•å‡ºPureComponents

â­ï¸ **å€¼å¾—ä¸€æçš„æ˜¯ï¼Œ`PureComponent` ä¸­ `shouldComponentUpdate` å¯¹ props åšå¾—åªæ˜¯æµ…å±‚æ¯”è¾ƒï¼Œä¸æ˜¯æ·±å±‚æ¯”è¾ƒï¼Œå¦‚æœ props æ˜¯ä¸€ä¸ªæ·±å±‚å¯¹è±¡ï¼Œå°±å®¹æ˜“äº§ç”Ÿé—®é¢˜ã€‚**

â­ï¸ æ¯”å¦‚ï¼Œä¸¤æ¬¡æ¸²æŸ“ä¼ å…¥çš„æŸä¸ª props éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯å¯¹è±¡ä¸­æŸä¸ªå±æ€§çš„å€¼ä¸åŒï¼Œè¿™åœ¨ PureComponent çœ¼é‡Œï¼Œprops æ²¡æœ‰å˜åŒ–ï¼Œä¸ä¼šé‡æ–°æ¸²æŸ“ï¼Œä½†æ˜¯è¿™æ˜æ˜¾ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚



### 4.React.memo:

**è™½ç„¶ PureComponent å¯ä»¥æé«˜ç»„ä»¶æ¸²æŸ“æ€§èƒ½ï¼Œä½†æ˜¯å®ƒä¹Ÿä¸æ˜¯æ²¡æœ‰ä»£ä»·çš„ï¼Œå®ƒé€¼è¿«æˆ‘ä»¬å¿…é¡»æŠŠç»„ä»¶å®ç°ä¸º classï¼Œä¸èƒ½ç”¨çº¯å‡½æ•°æ¥å®ç°ç»„ä»¶ã€‚**

ğŸ­ React v16.6.0 ä¹‹åçš„ç‰ˆæœ¬ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ–°åŠŸèƒ½ `React.memo` æ¥å®Œç¾å®ç° React ç»„ä»¶ï¼Œä¸Šé¢çš„ Joke ç»„ä»¶å¯ä»¥è¿™ä¹ˆå†™ï¼š

```javascript
const Joke = React.memo(() => (
    <div>
        <img src={SmileFace} />
        {this.props.value || 'loading...' }
    </div>
));
```

React.memo æ—¢åˆ©ç”¨äº† shouldComponentUpdateï¼Œåˆä¸è¦æ±‚æˆ‘ä»¬å†™ä¸€ä¸ª classï¼Œè¿™ä¹Ÿä½“ç°å‡º React é€æ­¥å‘å®Œå…¨å‡½æ•°å¼ç¼–ç¨‹å‰è¿›